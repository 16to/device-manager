# ç¦»çº¿éƒ¨ç½²æŒ‡å—

æœ¬é¡¹ç›®æ”¯æŒå®Œå…¨ç¦»çº¿éƒ¨ç½²ï¼Œæ— éœ€ç½‘ç»œè¿æ¥å³å¯å®‰è£…æ‰€æœ‰ Python ä¾èµ–ã€‚

## ğŸ“¦ å‡†å¤‡ç¦»çº¿å®‰è£…åŒ…

åœ¨æœ‰ç½‘ç»œçš„ç¯å¢ƒä¸­ï¼Œè¿è¡Œå¯¼å‡ºè„šæœ¬ï¼š

```bash
chmod +x export-libs.sh
./export-libs.sh
```

è¿™å°†ï¼š
1. ä¸‹è½½æ‰€æœ‰ Python ä¾èµ–åŒ…åˆ° `libs/` ç›®å½•ï¼ˆçº¦ 17MBï¼Œ24 ä¸ªåŒ…ï¼‰
2. æ‰“åŒ…åå¯åœ¨ç¦»çº¿ç¯å¢ƒä½¿ç”¨

## ğŸš€ ç¦»çº¿éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ start.shï¼ˆæœ¬åœ°è¿è¡Œï¼‰

```bash
# 1. å°†æ•´ä¸ªé¡¹ç›®ç›®å½•ï¼ˆåŒ…å« libs/ï¼‰å¤åˆ¶åˆ°ç›®æ ‡æœºå™¨
# 2. ç¡®ä¿ç›®æ ‡æœºå™¨å·²å®‰è£… Python 3.8+
# 3. è¿è¡Œå¯åŠ¨è„šæœ¬
./start.sh
```

**è‡ªåŠ¨æ£€æµ‹ï¼š**
- å¦‚æœå­˜åœ¨ `libs/` ç›®å½•ï¼Œè‡ªåŠ¨ä½¿ç”¨ç¦»çº¿æ¨¡å¼
- å¦‚æœä¸å­˜åœ¨ï¼Œè‡ªåŠ¨ä»é•œåƒæºä¸‹è½½

### æ–¹æ³•äºŒï¼šä½¿ç”¨ deploy.shï¼ˆç”Ÿäº§éƒ¨ç½²ï¼‰

```bash
# 1. å°†æ•´ä¸ªé¡¹ç›®ç›®å½•ï¼ˆåŒ…å« libs/ï¼‰å¤åˆ¶åˆ°ç›®æ ‡æœåŠ¡å™¨
# 2. è¿è¡Œéƒ¨ç½²è„šæœ¬
sudo ./deploy.sh
```

**è‡ªåŠ¨æ£€æµ‹ï¼š**
- ä¼˜å…ˆä½¿ç”¨ `libs/` ç›®å½•è¿›è¡Œç¦»çº¿å®‰è£…
- å¦‚æœä¸å­˜åœ¨ï¼Œè‡ªåŠ¨ä»é•œåƒæºä¸‹è½½

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

**å¿…é¡»ï¼š**
- Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- åŸºæœ¬çš„ Python å·¥å…·ï¼ˆpython3-venvï¼Œé€šå¸¸ç³»ç»Ÿè‡ªå¸¦ï¼‰

**å¯é€‰ï¼š**
- ç½‘ç»œè¿æ¥ï¼ˆä»…åœ¨æ²¡æœ‰ libs/ ç›®å½•æ—¶éœ€è¦ï¼‰

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ä¸€ï¼šæœ‰ç½‘ç»œç¯å¢ƒ
```bash
# ç›´æ¥è¿è¡Œï¼Œè‡ªåŠ¨ä¸‹è½½ä¾èµ–
./start.sh
```

### åœºæ™¯äºŒï¼šå®Œå…¨ç¦»çº¿ç¯å¢ƒ
```bash
# 1. åœ¨æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šå‡†å¤‡
./export-libs.sh

# 2. æ‰“åŒ…æ•´ä¸ªé¡¹ç›®ï¼ˆåŒ…å« libs/ï¼‰
tar -czf device-manager.tar.gz .

# 3. åœ¨ç¦»çº¿æœºå™¨ä¸Šè§£å‹å¹¶è¿è¡Œ
tar -xzf device-manager.tar.gz
./start.sh  # è‡ªåŠ¨ä½¿ç”¨ç¦»çº¿æ¨¡å¼
```

### åœºæ™¯ä¸‰ï¼šå†…ç½‘ç¯å¢ƒéƒ¨ç½²
```bash
# 1. å‡†å¤‡ç¦»çº¿åŒ…
./export-libs.sh

# 2. é€šè¿‡å†…ç½‘ä¼ è¾“åˆ°ç›®æ ‡æœåŠ¡å™¨
# 3. éƒ¨ç½²
sudo ./deploy.sh  # è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ libs/
```

## ğŸ“Š libs/ ç›®å½•è¯´æ˜

```
libs/
â”œâ”€â”€ Flask-2.3.3-py3-none-any.whl
â”œâ”€â”€ Flask_SQLAlchemy-2.5.1-py2.py3-none-any.whl
â”œâ”€â”€ Werkzeug-2.3.8-py3-none-any.whl
â”œâ”€â”€ SQLAlchemy-1.4.54.tar.gz
â”œâ”€â”€ ... ï¼ˆå…± 24 ä¸ªåŒ…ï¼Œçº¦ 17MBï¼‰
```

**ç‰¹ç‚¹ï¼š**
- åŒ…å«æ‰€æœ‰ç›´æ¥ä¾èµ–å’Œé—´æ¥ä¾èµ–
- é¢„ç¼–è¯‘çš„ wheel æ–‡ä»¶ï¼Œå®‰è£…å¿«é€Ÿ
- è·¨å¹³å°å…¼å®¹ï¼ˆPython 3.8+ï¼‰

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Python ç‰ˆæœ¬**ï¼šlibs/ ä¸­çš„åŒ…é€‚ç”¨äº Python 3.8+
2. **å¹³å°å…¼å®¹**ï¼šMacOS ä¸Šå¯¼å‡ºçš„åŒ…å¯èƒ½åŒ…å«å¹³å°ç‰¹å®šæ–‡ä»¶ï¼Œå»ºè®®åœ¨ç›®æ ‡å¹³å°ä¸Šé‡æ–°è¿è¡Œ `export-libs.sh`
3. **æ›´æ–°ä¾èµ–**ï¼šä¿®æ”¹ `requirements.txt` åéœ€è¦é‡æ–°è¿è¡Œ `export-libs.sh`
4. **å­˜å‚¨ç©ºé—´**ï¼šlibs/ ç›®å½•çº¦ 17MBï¼Œæ‰“åŒ…åçº¦ 10MB

## ğŸ”„ æ›´æ–°ç¦»çº¿åŒ…

å½“é¡¹ç›®ä¾èµ–æ›´æ–°æ—¶ï¼š

```bash
# åˆ é™¤æ—§çš„ç¦»çº¿åŒ…
rm -rf libs/

# é‡æ–°å¯¼å‡º
./export-libs.sh

# æäº¤åˆ° gitï¼ˆå¯é€‰ï¼‰
git add libs/
git commit -m "æ›´æ–°ç¦»çº¿ä¾èµ–åŒ…"
```

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

**å®‰è£…å‘½ä»¤ï¼š**
```bash
# ç¦»çº¿æ¨¡å¼
pip3 install --no-index --find-links=libs -r requirements.txt

# åœ¨çº¿æ¨¡å¼
pip3 install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/
```

**è‡ªåŠ¨æ£€æµ‹é€»è¾‘ï¼š**
```bash
if [ -d "libs" ] && [ "$(ls -A libs 2>/dev/null)" ]; then
    # ä½¿ç”¨ç¦»çº¿æ¨¡å¼
else
    # ä½¿ç”¨åœ¨çº¿æ¨¡å¼
fi
```

## âœ… éªŒè¯å®‰è£…

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# æŸ¥çœ‹å·²å®‰è£…çš„åŒ…
pip3 list | grep -E "Flask|SQLAlchemy|socketio|paramiko"

# åº”è¯¥çœ‹åˆ°æ‰€æœ‰ä¾èµ–éƒ½å·²å®‰è£…
```

---

**å®Œå…¨ç¦»çº¿éƒ¨ç½² = Python 3.8+ + é¡¹ç›®ä»£ç  + libs/ ç›®å½•** ğŸ‰
