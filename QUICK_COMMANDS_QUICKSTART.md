# 快捷命令功能 - 快速开始指南

## 🚀 快速开始

### 第一步：以管理员身份登录

1. 打开浏览器访问系统地址（例如：http://your-server:3001）
2. 点击 **"管理员登录"**
3. 输入管理员账号密码登录

### 第二步：进入快捷命令管理

1. 登录后，点击顶部导航栏的 **"快捷命令"** 标签
2. 您会看到快捷命令管理界面

### 第三步：创建第一个快捷命令

点击 **"➕ 添加快捷命令"** 按钮，创建以下示例命令：

#### 示例1：查看当前目录
```
按钮名称：查看目录
命令内容：ls -la
命令描述：列出当前目录所有文件
排序顺序：1
启用状态：✓ 勾选
```

#### 示例2：查看磁盘使用
```
按钮名称：磁盘空间
命令内容：df -h
命令描述：显示磁盘使用情况
排序顺序：2
启用状态：✓ 勾选
```

#### 示例3：查看内存使用
```
按钮名称：内存信息
命令内容：free -h
命令描述：显示内存使用情况
排序顺序：3
启用状态：✓ 勾选
```

#### 示例4：查看系统信息
```
按钮名称：系统信息
命令内容：uname -a
命令描述：显示系统版本和内核信息
排序顺序：4
启用状态：✓ 勾选
```

#### 示例5：清除屏幕
```
按钮名称：清屏
命令内容：clear
命令描述：清除终端屏幕内容
排序顺序：99
启用状态：✓ 勾选
```

### 第四步：测试快捷命令

1. 返回 **"设备列表"** 页面
2. 找到一个已配置SSH连接的设备
3. 点击设备的 **SSH** 连接按钮
4. SSH终端窗口打开后，您会在窗口底部看到刚才创建的5个快捷按钮
5. 点击任意按钮，命令会立即在终端中执行

## 📝 推荐的快捷命令配置

### 基础系统信息（5个常用命令）

| 名称 | 命令 | 用途 |
|------|------|------|
| 查看目录 | `ls -lah` | 查看当前目录文件 |
| 磁盘空间 | `df -h` | 查看磁盘使用情况 |
| 内存信息 | `free -h` | 查看内存使用 |
| 系统信息 | `uname -a` | 查看系统版本 |
| 清屏 | `clear` | 清除终端屏幕 |

### 进阶监控命令（5个）

| 名称 | 命令 | 用途 |
|------|------|------|
| CPU信息 | `lscpu` | 查看CPU详细信息 |
| 进程列表 | `ps aux \| head -20` | 查看前20个进程 |
| 网络连接 | `netstat -tuln` | 查看网络连接状态 |
| 当前用户 | `whoami` | 显示当前登录用户 |
| 系统时间 | `date` | 显示当前系统时间 |

### 日志查看命令（5个）

| 名称 | 命令 | 用途 |
|------|------|------|
| 系统日志 | `tail -n 50 /var/log/syslog` | 查看最近50条系统日志 |
| 内核日志 | `dmesg \| tail -n 30` | 查看最近30条内核消息 |
| 登录记录 | `last -n 20` | 查看最近20次登录 |
| 失败登录 | `lastb -n 20` | 查看失败的登录尝试 |
| 当前登录 | `who` | 查看当前登录的用户 |

### 开发调试命令（5个）

| 名称 | 命令 | 用途 |
|------|------|------|
| 查找进程 | `ps aux \| grep python` | 查找Python进程 |
| 端口监听 | `lsof -i -P -n` | 查看端口监听情况 |
| Git状态 | `git status` | 查看Git仓库状态 |
| Docker容器 | `docker ps` | 查看运行的容器 |
| 服务状态 | `systemctl status nginx` | 查看服务状态 |

## 💡 使用技巧

### 技巧1：多行命令组合

您可以将多个命令组合成一个按钮：

```
按钮名称：系统概览
命令内容：
echo "=== 系统信息 ==="
uname -a
echo ""
echo "=== 磁盘使用 ==="
df -h
echo ""
echo "=== 内存使用 ==="
free -h
```

### 技巧2：使用管道符

```
按钮名称：大文件
命令内容：ls -lh | sort -k5 -hr | head -10
描述：显示当前目录最大的10个文件
```

### 技巧3：带颜色输出

```
按钮名称：彩色目录
命令内容：ls -la --color=always
描述：带颜色显示目录内容
```

### 技巧4：条件执行

```
按钮名称：检查服务
命令内容：systemctl is-active nginx && echo "Nginx运行中" || echo "Nginx未运行"
描述：检查Nginx服务状态
```

### 技巧5：使用别名

```
按钮名称：快速检查
命令内容：ll && pwd && whoami
描述：显示目录、路径和当前用户
```

## ⚠️ 注意事项

### 避免使用的命令

1. **交互式命令**：如 `vi`、`nano`、`top`
   - 原因：这些命令需要持续交互，不适合快捷按钮

2. **危险命令**：如 `rm -rf /`、`mkfs`
   - 原因：可能造成数据丢失或系统损坏

3. **需要确认的命令**：如 `apt-get install`
   - 原因：会在终端中等待用户输入确认

4. **长时间运行的命令**：如 `find / -name "*"`
   - 原因：可能导致终端长时间无响应

### 推荐做法

1. ✅ 使用只读查询命令
2. ✅ 添加适当的参数限制输出（如 `head`、`tail`）
3. ✅ 使用命令组合提高效率
4. ✅ 添加清晰的描述说明
5. ✅ 合理设置排序顺序

## 🔧 故障排除

### 问题1：点击按钮没有反应

**可能原因：**
- SSH连接未建立或已断开

**解决方法：**
- 刷新页面重新连接SSH

### 问题2：看不到快捷按钮

**可能原因：**
- 命令状态为"禁用"
- 浏览器缓存

**解决方法：**
- 在管理界面检查命令是否启用
- 刷新浏览器页面（Ctrl+F5）

### 问题3：命令执行失败

**可能原因：**
- 命令语法错误
- 权限不足
- 命令在系统中不存在

**解决方法：**
- 在终端中手动测试命令
- 检查用户权限
- 使用 `which 命令名` 确认命令存在

## 📚 更多资源

- 完整功能文档：[QUICK_COMMANDS_FEATURE.md](QUICK_COMMANDS_FEATURE.md)
- 部署指南：[DEPLOY.md](DEPLOY.md)
- 故障排除：系统日志 `journalctl -u device-manager`

## 🎯 示例场景

### 场景1：快速诊断服务器问题

创建以下5个命令：
1. **系统负载**：`uptime`
2. **磁盘告警**：`df -h | grep -E "9[0-9]%|100%"`
3. **内存告警**：`free -h`
4. **网络状态**：`ip a`
5. **错误日志**：`tail -n 20 /var/log/syslog | grep -i error`

### 场景2：开发环境快速操作

创建以下5个命令：
1. **进入项目**：`cd /opt/project && pwd`
2. **Git拉取**：`git pull`
3. **查看分支**：`git branch -a`
4. **重启服务**：`systemctl restart myapp`
5. **查看日志**：`tail -f /var/log/myapp.log`

### 场景3：安全审计

创建以下5个命令：
1. **登录用户**：`who`
2. **登录历史**：`last -n 10`
3. **失败登录**：`lastb -n 10`
4. **监听端口**：`netstat -tuln`
5. **运行进程**：`ps aux`

---

**祝您使用愉快！如有问题，请查看完整文档或联系管理员。**
